extends ../layout.pug

block content
  -
    const formatDate = (dateString) => {
      const date = new Date(dateString);

      return date.toLocaleString();
    }

  section.ticket
    .ticket__wrapper
      h1.visually-hidden Карточка объявления
      .ticket__content
        .ticket__img
          img(src=`/img/${pugOffer.picture}.jpg`
            srcset=`/img/${pugOffer.picture}@2x.jpg 2x`
            alt=pugOffer.title)
        .ticket__info
          h2.ticket__title #{pugOffer.title}
          .ticket__header
            p.ticket__price
              span.js-sum #{pugOffer.sum}
              |  ₽
            p.ticket__action #{pugOffer.type === `OFFER` ? `КУПЛЮ` : `ПРОДАМ`}
          .ticket__desc
            p #{pugOffer.description}
          .ticket__data
            p
              b Дата добавления:
              span #{formatDate(pugOffer.createdAt)}
            p
              b Автор:
              a(href='#') Денис Шкатулкин
            p
              b Контакты:
              a(href='mailto:shkatulkin@ya.ru') shkatulkin@ya.ru
          ul.ticket__tags
            each category in pugOffer.categories
              li
                a.category-tile.category-tile--small(href='#')
                  span.category-tile__image
                    +categoryImage(category)
                  span.category-tile__label #{category.name}
            li
              a.category-tile.category-tile--small(href='#')
                span.category-tile__image
                  img(src='img/cat04.jpg' srcset='img/cat04@2x.jpg 2x' alt='Иконка категории')
                span.category-tile__label Спорт и отдых

      .ticket__comments
        h2.ticket__subtitle Комментарии
        .ticket__comment-form
          form.form.comment-form(action='#' method='post')
            .comment-form__header
              a.comment-form__avatar.avatar(href='#')
                img(src='img/avatar.jpg' srcset='img/avatar@2x.jpg 2x' alt='Аватар пользователя')
              p.comment-form__author Вам слово
            .comment-form__field
              .form__field
                textarea#comment-field.js-field(name='comment' cols='30' rows='10' maxlength='400' minlength='50') Нормальное вообще кресло! А как насч
                label(for='comment-field') Текст комментария
                span Обязательное поле
            button.comment-form__button.btn.btn--white.js-button(type='submit' disabled) Отправить

        .ticket__comments-list
          ul.comments-list
            if pugOffer.comments && pugOffer.comments.length
              each comment in pugOffer.comments
                li
                  .comment-card
                    .comment-card__header
                      a.comment-card__avatar.avatar(href='#')
                        img(src='img/avatar03.jpg' srcset='img/avatar03@2x.jpg 2x' alt='Аватар пользователя')
                      p.comment-card__author Александр Бурый
                    .comment-card__content
                      p #{comment.text}
